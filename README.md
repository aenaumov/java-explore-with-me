# java-explore-with-me

## Техническое задание
разработать приложение ExploreWithMe. Оно должно давать возможность делиться информацией об интересных событиях и помогать найти компанию для участия в них.

## Used stack
- Java 11
- Spring Boot
- Spring REST
- Spring Data
- Spring Web
- Spring JPA
- Hibernate
- Docker
- Docker compose
- Postgresql
- OpenAPI
- Swagger
- Lombok
- Maven

## Идея
Свободное время — ценный ресурс. Ежедневно мы планируем, как его потратить — куда и с кем сходить. Сложнее всего в таком планировании поиск информации и переговоры. Какие намечаются мероприятия, свободны ли в этот момент друзья, как всех пригласить и где собраться. Приложение, которое вы будете создавать, — афиша, где можно предложить какое-либо событие от выставки до похода в кино и набрать компанию для участия в нём.

![image](https://github.com/aenaumov/java-explore-with-me/assets/100286296/ca26242a-9ec5-4391-9305-53d74d84b366)

Приложение имеет микросервисную структуру.
- service - Основной сервис — содержит всё необходимое для работы продукта.
- server - Сервис статистики — хранит количество просмотров и позволяет делать различные выборки для анализа работы приложения.
- client - вынесена отдельно функциональность WebClient

## Основной сервис
API основного сервиса разделите на три части. Первая — публичная, доступна без регистрации любому пользователю сети. Вторая — закрытая, доступна только авторизованным пользователям. Третья — административная, для администраторов сервиса. К каждой из частей свои требования. 
### Требования к публичному API
1. Публичный API должен предоставлять возможности поиска и фильтрации событий.
2. Сортировка списка событий должна быть организована либо по количеству просмотров, которое должно запрашиваться в сервисе статистики, либо по датам событий.
3. При просмотре списка событий возвращается только краткая информация о мероприятиях.
4. Просмотр подробной информации о конкретном событии нужно настроить отдельно (через отдельный эндпоинт).
5. Каждое событие должно относиться к какой-то из закреплённых в приложении категорий.
6. Должна быть настроена возможность получения всех имеющихся категорий и подборок событий (такие подборки будут составлять администраторы ресурса).
7. Каждый публичный запрос для получения списка событий или полной информации о мероприятии должен фиксироваться сервисом статистики.

### Требования к API для авторизованных пользователей
1. Закрытая часть API призвана реализовать возможности зарегистрированных пользователей продукта. 
2. Авторизованные пользователи должны иметь возможность добавлять в приложение новые мероприятия, редактировать их и просматривать после добавления.
3. Должна быть настроена подача заявок на участие в интересующих мероприятиях.
4. Создатель мероприятия должен иметь возможность подтверждать заявки, которые отправили другие пользователи сервиса.

### Требования к API для администратора
1. Административная часть API должна предоставлять возможности настройки и поддержки работы сервиса. 
2. Нужно настроить добавление, изменение и удаление категорий для событий.
3. Должна появиться возможность добавлять, удалять и закреплять на главной странице подборки мероприятий.
4. Требуется наладить модерацию событий, размещённых пользователями, — публикация или отклонение.
5. Также должно быть настроено управление пользователями — добавление, просмотр и удаление.

## Сервис статистики
Сервис статистики, призван собирать информацию. Во-первых, о количестве обращений пользователей к спискам событий и, во-вторых, о количестве запросов к подробной информации о событии. На основе этой информации должна формироваться статистика о работе приложения.

Функционал сервиса статистики должен содержать:
- запись информации о том, что был обработан запрос к эндпоинту API;
- предоставление статистики за выбранные даты по выбранному эндпоинту.
Чтобы можно было использовать сервис статистики, нужно разработать HTTP-клиент. Он будет отправлять запросы и обрабатывать ответы.

## Модель данных
Жизненный цикл события должен включать несколько этапов. 
1. Создание.
2. Ожидание публикации. В статус ожидания публикации событие переходит сразу после создания.
3. Публикация. В это состояние событие переводит администратор.
4. Отмена публикации. В это состояние событие переходит в двух случаях. Первый — если администратор решил, что его нельзя публиковать. Второй — когда инициатор события решил отменить его на этапе ожидания публикации.

## Аутентификация и авторизация
Условно предполагается, что оба сервиса ExploreWithMe работают за VPN. С внешним миром их связывает гейтвей. Он контактирует с системой аутентификации и авторизации, а затем перенаправляет запрос в сервисы. То есть, если гейтвей пропустил запрос к закрытой или административной части API, значит этот запрос успешно прошел аутентификацию и авторизацию.

## Спецификация API
- [спецификация основного сервиса](https://github.com/aenaumov/java-explore-with-me/blob/main/ewm-main-service-spec.json)
- [спецификация сервиса статистики](https://github.com/aenaumov/java-explore-with-me/blob/main/ewm-stats-service-spec.json)

